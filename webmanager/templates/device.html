{% extends "layout.html" %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      {% if isnew %}
        <h1>New Device</h1>
        <form method="POST" action="/device/new/save/">
      {% else %}
        <h1>Device {{device.name}}"</h1>
        <form method="POST" action="/device/{{device.id|int}}/save/">
      {% endif %}
        <table class="table">
          <tbody>
            <tr>
              <th>name</th>
              {% if isnew %}
                <th><input type="text" class="form-control" id="exampleInput" name="name" value=""></th>
              {% else %}
                <th><input type="text" class="form-control" id="exampleInput" name="name" value="{{device.name}}"></th>
              {% endif %}
            </tr>
            {% if not isnew %}
              <tr>
                  <th>apps</th>
                  <th>
                    <table class="table table-bordered">
                      <tbody>
                        {% if local_apps %}
                          {% for local_app in local_apps %}
                            {% if device.id|int == local_app.device_id|int %}
                              <tr>
                                <th>{{local_app.name}}</th>
                                <th>
                                  <input type="button" class="btn btn-default" onclick="location.href='/device/{{device.id|int}}/app/{{local_app.id|int}}'"value="Setting">
                                </th>
                                <th>
                                  <input type="button" class="btn btn-default" onclick="location.href='/device/{{device.id|int}}/app/{{local_app.id|int}}/datastore'"value="Datastore">
                                </th>
                              </tr>
                            {% endif %}
                          {% endfor %}
                        {% endif %}
                      </tbody>
                    </table>
                  <p>
                    <input type="button" class="btn btn-default" onclick="location.href='/device/{{device.id|int}}/store'"value="Add">
                  </p>
                </th>
              </tr>
            {% endif %}
            <tr>
              <th>notes</th>
              {% if isnew %}
                <th><input type="text" class="form-control" id="exampleInput" name="note" value=""></th>
              {% else %}
                <th><input type="text" class="form-control" id="exampleInput" name="note" value="{{device.note}}"></th>
              {% endif %}
            </tr>
          </tbody>
        </table>
        <p><button type="submit" class="btn btn-default">Save</button></p>
      </form>
      {% if not isnew %}
        <input type="button" class="btn btn-default" onclick="location.href='/device/{{device.id|int}}/delete/'"value="Delete">
      {% endif %}
      <p><input type="button" class="btn btn-default" onclick="location.href='/device/list/'"value="Device List"></p>
      <p><input type="button" class="btn btn-default" onclick="location.href='/'"value="Top"></p>
    </div>
  </div>
</div>
{% endblock %}
