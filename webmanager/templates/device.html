{% extends "layout.html" %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      {% if device %}
      <h1>Device "{{device.name}}"</h1>
      {% endif %}
      <form method="POST" action="/device/{{device.id|int}}/save/">
        <table class="table">
          <tbody>
            <tr>
              <th>name</th>
              <th><input type="text" class="form-control" id="exampleInput" name="name" value="{{device.name}}"></th>
            </tr>
            <tr>
              <th>apps</th>
              <th>
                <table class="table table-bordered">
                  <tbody>
                      <tr>
                        {% for appid in device.local_apps %}
                          {% if local_apps %}
                            {% for local_app in local_apps %}
                              {% if appid|int == local_app.id|int %}
                                <th>{{local_app.name}}</th>
                                <th>
                                  <form method="POST" action="/device/{{device.id}}/app/{{local_app.id}}">
                                    <button type="submit" class="btn btn-default">Setting</button>
                                  </form>
                                </th>
                                <th>
                                  <form method="POST" action="/device/{{device.id}}/app/{{local_app.id}}/datastore/">
                                    <button type="submit" class="btn btn-default">Datastore</button>
                                  </form>
                                </th>
                              {% endif %}
                            {% endfor %}
                          {% endif %}
                        {% endfor %}
                      </tr>
                  </tbody>
                </table>
                <p>
                  <form method="POST" action="/device/{{device.id}}/store">
                    <button type="submit" class="btn btn-default">Add</button>
                  </form>
                </p>
              </th>
            </tr>
            <tr>
              <th>notes</th>
              <th><input type="text" class="form-control" id="exampleInput" name="notes" value="{{device.notes}}"></th>
            </tr>
          </tbody>
        </table>
        <p><button type="submit" class="btn btn-default">Save</button></p>
      </form>
      <p><button type="button" class="btn btn-default" onclick="history.back()">Back</button></p>
    </div>
  </div>
</div>
{% endblock %}
